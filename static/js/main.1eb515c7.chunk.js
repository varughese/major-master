(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{132:function(e,t,a){e.exports=a(262)},137:function(e,t,a){},138:function(e,t,a){},262:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(27),c=a.n(s),i=(a(137),a(138),a(8)),o=a(9),l=a(12),u=a(10),m=a(11),d=a(287),h=a(290),p=a(286),f=a(289),E="/",v=a(263),b=a(14),S=a.n(b),g=a(16),C=a(264),O=a(265),j=a(128),y=a(266),k=a(267),P=a(268),N=a(269),M=a(270),w=n.a.createContext(null),D=function(e){return function(t){return n.a.createElement(w.Consumer,null,function(a){return n.a.createElement(e,Object.assign({},t,{firebase:a}))})}},A=w,I=a(52),T=a.n(I),_=(a(186),a(189),{apiKey:"AIzaSyAsBSW4ShonjhvhdxFuqRwQs9_1VaTR-64",authDomain:"major-master-20a62.firebaseapp.com",databaseURL:"https://major-master-20a62.firebaseio.com",projectId:"major-master-20a62",storageBucket:"major-master-20a62.appspot.com",messagingSenderId:"386923600691"}),x=function(){function e(){var t=this;Object(i.a)(this,e),this.getUser=function(){return t.auth.currentUser?t.auth.currentUser:(console.warn("No user. Log in"),null)},this.getUserId=function(){var e=JSON.parse(localStorage.getItem("authUser"));return t.auth.currentUser?t.auth.currentUser.uid:e?e.uid:null},this.signOut=function(){return localStorage.removeItem("authUser"),localStorage.removeItem("cached_course_descriptions"),localStorage.removeItem("course_list"),t.auth.signOut()},this.user_ref=function(){var e=t.getUserId();return t.db.ref("users/".concat(e))},this.courses=function(){return t.db.ref("course_list")},this.course_descriptions=function(){return t.db.ref("courses")},T.a.initializeApp(_),this.db=T.a.database(),this.auth=T.a.auth(),this.cached_course_descriptions=JSON.parse(localStorage.getItem("cached_course_descriptions"))||{}}return Object(o.a)(e,[{key:"doSignInWithEmailAndPassword",value:function(){var e=Object(g.a)(S.a.mark(function e(t,a){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.setPersistence(T.a.auth.Auth.Persistence.LOCAL);case 2:return e.abrupt("return",this.auth.signInWithEmailAndPassword(t,a));case 3:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"createUserWithEmailAndPassword",value:function(){var e=Object(g.a)(S.a.mark(function e(t,a){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.auth.createUserWithEmailAndPassword(t,a));case 1:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getCourseDescription",value:function(){var e=Object(g.a)(S.a.mark(function e(t){var a,r,n,s;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=this.cached_course_descriptions)[t]){e.next=3;break}return e.abrupt("return",a[t]);case 3:return r=this.db.ref("course_descriptions"),e.next=6,r.child(t).once("value");case 6:return n=e.sent,s=n.val(),a[t]=s,localStorage.setItem("cached_course_descriptions",JSON.stringify(a)),e.abrupt("return",s);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),L=(r.Component,function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={course_list:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.props.firebase.courses().on("value",function(t){var a=t.val();e.setState({loading:!1,course_list:a})})}},{key:"componentWillUnmount",value:function(){this.props.firebase.courses().off()}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.course_list;return t?n.a.createElement("div",null,"Loading"):n.a.createElement("ol",null,a.map(function(e){return n.a.createElement(R,{key:e,name:e})}))}}]),t}(r.Component)),U=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"getCourseInfo",value:function(){var e=Object(g.a)(S.a.mark(function e(){var t,a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.name,e.next=3,this.props.firebase.course_descriptions().child(t).once("value");case 3:a=e.sent,alert(JSON.stringify(a.val()));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.a.createElement(j.a,{color:"primary",onClick:function(){return e.getCourseInfo()}},this.props.name)}}]),t}(r.Component),R=D(U),B=D(L);function H(e){return n.a.createElement(y.a,null,n.a.createElement(k.a,null,n.a.createElement(P.a,{for:"exampleEmail"},"Email"),n.a.createElement(N.a,{type:"email",name:"email",id:"exampleEmail",placeholder:"with a placeholder"})),n.a.createElement(k.a,null,n.a.createElement(P.a,{for:"examplePassword"},"Password"),n.a.createElement(N.a,{type:"password",name:"password",id:"examplePassword",placeholder:"password placeholder"})),n.a.createElement(k.a,null,n.a.createElement(P.a,{for:"exampleSelect"},"Select"),n.a.createElement(N.a,{type:"select",name:"select",id:"exampleSelect"},n.a.createElement("option",null,"1"),n.a.createElement("option",null,"2"),n.a.createElement("option",null,"3"),n.a.createElement("option",null,"4"),n.a.createElement("option",null,"5"))),n.a.createElement(k.a,null,n.a.createElement(P.a,{for:"exampleSelectMulti"},"Select Multiple"),n.a.createElement(N.a,{type:"select",name:"selectMulti",id:"exampleSelectMulti",multiple:!0},n.a.createElement("option",null,"1"),n.a.createElement("option",null,"2"),n.a.createElement("option",null,"3"),n.a.createElement("option",null,"4"),n.a.createElement("option",null,"5"))),n.a.createElement(k.a,null,n.a.createElement(P.a,{for:"exampleText"},"Text Area"),n.a.createElement(N.a,{type:"textarea",name:"text",id:"exampleText"})),n.a.createElement(k.a,null,n.a.createElement(P.a,{for:"exampleFile"},"File"),n.a.createElement(N.a,{type:"file",name:"file",id:"exampleFile"}),n.a.createElement(M.a,{color:"muted"},"This is some placeholder block-level help text for the above input. It's a bit lighter and easily wraps to a new line.")),n.a.createElement(k.a,{tag:"fieldset"},n.a.createElement("legend",null,"Radio Buttons"),n.a.createElement(k.a,{check:!0},n.a.createElement(P.a,{check:!0},n.a.createElement(N.a,{type:"radio",name:"radio1"})," ","Option one is this and that\u2014be sure to include why it's great")),n.a.createElement(k.a,{check:!0},n.a.createElement(P.a,{check:!0},n.a.createElement(N.a,{type:"radio",name:"radio1"})," ","Option two can be something else and selecting it will deselect option one")),n.a.createElement(k.a,{check:!0,disabled:!0},n.a.createElement(P.a,{check:!0},n.a.createElement(N.a,{type:"radio",name:"radio1",disabled:!0})," ","Option three is disabled"))),n.a.createElement(k.a,{check:!0},n.a.createElement(P.a,{check:!0},n.a.createElement(N.a,{type:"checkbox"})," ","Check me out")),n.a.createElement(j.a,null,"Submit"))}var F=a(22),G=a(28),W=a(36),q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isEditMode:e.isEditMode},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.id;return this.props.connectDragSource(n.a.createElement("div",{className:"course-item",onClick:this.props.setCurrentCourse},n.a.createElement("div",{className:"course-item-title"},t),n.a.createElement("div",null,!this.props.viewMode&&n.a.createElement(j.a,{color:"danger",size:"sm",onClick:function(a){a.stopPropagation(),e.props.removeCourse(t)}},"X"))))}}]),t}(r.Component);var J=Object(W.DragSource)("COURSE",{beginDrag:function(e){return Object(F.a)({removeMe:!0},e)}},function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(q),z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).addCourseToThisSemester=function(e){a.props.addCourse(a.props.termcode,e)},a.removeCourseFromThisSemester=function(e){a.props.removeCourse(a.props.termcode,{id:e})},a.state={isEditMode:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.courses;return this.props.connectDropTarget(n.a.createElement("div",{className:"semester-card col-md-2 col-sm-3"},n.a.createElement("div",{className:"semester-title"},this.props.title),n.a.createElement("div",{className:"semester-course-list"},t.map(function(t){return n.a.createElement(J,Object.assign({key:t.id,termcode:e.props.termcode},t,{removeCourse:e.removeCourseFromThisSemester,viewMode:e.props.viewMode,setCurrentCourse:function(){return e.props.setCurrentCourse(t.id)}}))}))))}}]),t}(r.Component);var K=Object(W.DropTarget)("COURSE",{drop:function(e,t){var a=t.getItem();a.removeMe&&e.removeCourse(a.termcode,{id:a.id}),e.checkPrereq(e.termcode,a.id),e.addCourse(e.termcode,{id:a.id,grade:"?",status:"FUTURE"})}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}})(z),V=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.semesters,a=n.a.createElement("div",null,"Loading");return t&&(a=t.map(function(t){return n.a.createElement(K,{key:t.id,courses:t.courses,termcode:t.id,title:t.title,addCourse:e.props.addCourse,checkPrereq:e.props.checkPrereq,removeCourse:e.props.removeCourse,setCurrentCourse:e.props.setCurrentCourse,viewMode:e.props.viewMode})})),n.a.createElement(C.a,{className:"semesters-holder"},a)}}]),t}(r.Component),Y=a(24),Q=a(288),$=a(272),Z=a(273),X=a(274),ee=a(271),te=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onTermChange=function(e){var t=e.target,r=t.name,n=t.value;"semseter_code"===e.target.name&&a.setState({active_button:n}),a.setState(Object(Y.a)({},r,n),function(e){if(4===a.state.year_code.length){var t=a.state.year_code,r=Number(t.substring(2,4)),n=a.state.semseter_code;1===Number(n)&&r++;var s=t.substring(0,1)+r+a.state.semseter_code;a.setState({full_term_code:s}),a.props.setTermCode(s)}})},a.state={semseter_code:"Enter Semseter Code",year_code:"",full_term_code:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.semester_code,a=e.year_code,r=e.active_button;return n.a.createElement("div",{className:"semester-chooser"},n.a.createElement(ee.a,{value:t,onClick:this.onTermChange},n.a.createElement(j.a,{active:"1"===r,name:"semseter_code",type:"button",value:"1"},"Fall"),n.a.createElement(j.a,{active:"4"===r,name:"semseter_code",type:"button",value:"4"},"Spring"),n.a.createElement(j.a,{active:"7"===r,name:"semseter_code",type:"button",value:"7"},"Summer")),n.a.createElement(N.a,{type:"number",name:"year_code",placeholder:"Year",onChange:this.onTermChange,value:a,id:"year_code"}))}}]),t}(r.Component),ae=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).toggle=function(){a.setState(function(e){return{modal:!e.modal}})},a.onChange=function(e){var t=e.target,r=t.name,n=t.value;a.setState(Object(Y.a)({},r,n))},a.getTermCode=a.getTermCode.bind(Object(G.a)(a)),a.state={full_term_code:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"getTermCode",value:function(e){this.setState({full_term_code:e})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"control-bar"},n.a.createElement(j.a,{color:"primary",onClick:this.toggle},"Add Semester"),n.a.createElement(j.a,{color:"primary",onClick:function(){e.props.exportPDF()}},"Export to PDF"),n.a.createElement(Q.a,{isOpen:this.state.modal,toggle:this.toggle},n.a.createElement($.a,{toggle:this.toggle},"Add Semester"),n.a.createElement(Z.a,null,n.a.createElement(te,{setTermCode:this.getTermCode}),this.state.full_term_code),n.a.createElement(X.a,null,n.a.createElement(j.a,{color:"primary",onClick:function(){e.props.addSemester(e.state.full_term_code),e.toggle()}},"Do Something")," ",n.a.createElement(j.a,{color:"secondary",onClick:this.toggle},"Cancel"))))}}]),t}(r.Component),re={1:"Fall",4:"Spring",7:"Summer"},ne=function(e){e+="";var t=Number(e.substring(1,3)),a=re[e[3]];return"Fall"===a&&t--,a&&t?"".concat(a.toUpperCase()," ").concat(t):e};var se=Object(W.DragSource)("COURSE",{beginDrag:function(e){return e}},function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(function(e){var t=e.connectDragSource,a=(e.isDragging,e.id),r=e.name,s=e.setCurrentCourse;return t(n.a.createElement("li",{onClick:s},a," - ",r))}),ce=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target.value||"";t=t.replace(/[^a-zA-Z\d\s:]/,""),a.setState({searchString:t,matchedCourses:a.filterCourses(t)})},a.filterCourses=function(e){var t=e.trim().toLowerCase(),r=a.props.course_list||[];return t.length>0?r.filter(function(e){return(e.id+e.name).toLowerCase().match(t)}).slice(0,20):[]},a.state={searchString:"",matchedCourses:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state.matchedCourses,a=0===t.length,r=n.a.createElement("p",{className:"help-text"},"Search in the box above and drag courses onto the semester you want to take them.");return n.a.createElement("div",{className:"course-search-section"},n.a.createElement(y.a,{inline:!0},n.a.createElement(k.a,null,n.a.createElement(N.a,{name:"search_input",id:"search_input",type:"text",value:this.state.searchString,onChange:this.handleChange,placeholder:"Search for courses..."}))),n.a.createElement("ul",{className:a?"help-text":""},t&&t.map(function(t,a){return n.a.createElement(se,Object.assign({key:a,setCurrentCourse:function(){return e.props.setCurrentCourse(t.id)}},t))}),a&&r))}}]),t}(r.Component),ie=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=!this.props.selected_course,t=n.a.createElement("p",null,"Click on a class to view more information"),a=this.props.selected_course||{},r=a.id,s=a.credits,c=a.description,i=a.title,o="None";this.props.selected_course&&this.props.selected_course.prereq&&(o=this.props.selected_course.prereq.text);var l=n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement("strong",null,r)),n.a.createElement("div",null,i),n.a.createElement("div",null,n.a.createElement("span",null,"Credits")," ",s),n.a.createElement("div",null,n.a.createElement("span",null,"Description"),n.a.createElement("div",{className:"description"},c)),n.a.createElement("div",null,n.a.createElement("span",null,"Prereqs")," ",o));return n.a.createElement("div",{className:"selected-course"},e?t:l)}}]),t}(r.Component),oe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(ce,{course_list:this.props.course_list,setCurrentCourse:this.props.setCurrentCourse}),n.a.createElement(ie,{selected_course:this.props.currentCourse}))}}]),t}(r.Component),le=a(130),ue=a(43);function me(e,t){if(null==t)return!0;if(t.hasOwnProperty("or"))return t.or.some(function(t){return me(e,t)});if(t.hasOwnProperty("and"))return t.and.every(function(t){return me(e,t)});if(t.hasOwnProperty(">")){var a=/^([a-z]+)(\d+)([a-z]*)$/i,r=t[">"].match(a)||[],n=Object(ue.a)(r,3),s=n[1],c=n[2],i=!0,o=!1,l=void 0;try{for(var u,m=e[Symbol.iterator]();!(i=(u=m.next()).done);i=!0){var d=u.value.match(a)||[],h=Object(ue.a)(d,3),p=h[1],f=h[2];if(p===s&&f>=c)return!0}}catch(D){o=!0,l=D}finally{try{i||null==m.return||m.return()}finally{if(o)throw l}}return!1}if(t.hasOwnProperty("range")){var E=/^([a-z]+)(\d+)([a-z]*)$/i,v=t.range[0].match(E)||[],b=Object(ue.a)(v,3),S=b[1],g=b[2],C=t.range[1].match(E)||[],O=Object(ue.a)(C,3)[2],j=!0,y=!1,k=void 0;try{for(var P,N=e[Symbol.iterator]();!(j=(P=N.next()).done);j=!0){var M=P.value.match(E)||[],w=Object(ue.a)(M,3);p=w[1],f=w[2];if(p===S&&f>=g&&f<=O)return!0}}catch(D){y=!0,k=D}finally{try{j||null==N.return||N.return()}finally{if(y)throw k}}return!1}return e.has(t)}var de=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={semestersList:[],course_list:[]},a.setCurrentCourseDescription=a.setCurrentCourseDescription.bind(Object(G.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=Object(g.a)(S.a.mark(function e(){var t=this;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!0}),this.props.firebase.user_ref().on("value",function(e){var a=e.val(),r=t.transformSemesterHashToList(a.semesters),n=r.semestersHash,s=r.semestersList;console.log("Data recieved from database",n),t.setState({loading:!1,userData:a,semestersHash:n,semestersList:s})}),this.fetchCourseListFromFirebase();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setCurrentCourseDescription",value:function(){var e=Object(g.a)(S.a.mark(function e(t){var a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.firebase.getCourseDescription(t);case 2:(a=e.sent)&&this.setState({currentDescription:a});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCourseListFromFirebase",value:function(){var e=Object(g.a)(S.a.mark(function e(){var t,a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=JSON.parse(localStorage.getItem("course_list"))){e.next=7;break}return e.next=4,this.props.firebase.courses().once("value");case 4:a=e.sent,t=this.transformCourseListData(a.val()),localStorage.setItem("course_list",JSON.stringify(t));case 7:this.setState({course_list:t});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"transformCourseListData",value:function(e){var t=Object.keys(e).map(function(t){return e[t]});return[].concat.apply([],t)}},{key:"transformSemesterHashToList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e).map(function(t){return e[t]}).sort(function(e){return e.id}).map(function(e){var t=Object.keys(e.courses||[]).map(function(t){return e.courses[t]}),a=Object(F.a)({},e);return a.courses=t||[],a.title=ne(e.id),a});return{semestersHash:e,semestersList:t}}},{key:"componentWillUnmount",value:function(){this.props.firebase.user_ref().off()}},{key:"exportPDF",value:function(){var e=this.state.userData.first_name,t=this.state.userData.last_name,a=this.state.semestersHash,r=new le;r.text(e+" "+t+"'s Plan",20,20),r.line(20,30,200,30);var n=40;for(var s in a){r.text(ne(a[s].id),20,n);var c=1;for(var i in a[s].courses)n+10*c>=280&&(r.addPage(),n=20,c=1),r.text(" - "+a[s].courses[i].id,30,n+10*c),c++;n+=10*c}r.save("Schedule.pdf")}},{key:"addSemester",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={};a[e]={courses:t,id:e},this.props.firebase.user_ref().child("semesters").update(a)}},{key:"addCourse",value:function(e,t){var a=this;if(t.id){e=Number(e),this.setState(function(r){var n=Object.assign({},r.semestersHash);if(n[e]){n[e].courses||(n[e].courses={}),n[e].courses[t.id]=t;var s=a.transformSemesterHashToList(n);return{semesterHash:s.semesterHash,semestersList:s.semestersList}}console.error("Semester",e,"not found in data")});var r={id:t.id,grade:t.grade,status:t.status};this.props.firebase.user_ref().child("semesters/".concat(e,"/courses/").concat(t.id)).update(r)}else console.error("Course cannot be added without an id")}},{key:"removeCourse",value:function(e,t){var a=this;t.id?(e=Number(e),this.setState(function(r){var n=Object.assign({},r.semestersHash);if(n[e]){delete n[e].courses[t.id];var s=a.transformSemesterHashToList(n);return{semesterHash:s.semesterHash,semestersList:s.semestersList}}console.error("Semester",e,"not found in data")}),this.props.firebase.user_ref().child("semesters/".concat(e,"/courses/").concat(t.id)).remove()):console.error("Course cannot be removed without an id")}},{key:"checkPrereq",value:function(){var e=Object(g.a)(S.a.mark(function e(t,a){var r,n,s,c;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.state.semestersList.filter(function(e){return Number(e.id)<=Number(t)}),n=[].concat.apply([],r.map(function(e){return e.courses})).map(function(e){return e.id}),e.next=4,this.props.firebase.getCourseDescription(a);case 4:s=e.sent,s.prereq&&null!==s.prereq.tree&&(c=s.prereq.tree,me(new Set(n),c)||this.setState({invalidPrereq:s}));case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.a.createElement(C.a,{className:"schedule-viewer-row"},n.a.createElement(O.a,{md:"3",className:"side-panel-holder"},n.a.createElement(oe,{course_list:this.state.course_list,currentCourse:this.state.currentDescription,setCurrentCourse:this.setCurrentCourseDescription.bind(this)})),n.a.createElement(O.a,{md:"9"},n.a.createElement(V,{semesters:this.state.semestersList,addCourse:this.addCourse.bind(this),removeCourse:this.removeCourse.bind(this),checkPrereq:this.checkPrereq.bind(this),setCurrentCourse:this.setCurrentCourseDescription.bind(this)}),n.a.createElement(he,{invalidPrereq:this.state.invalidPrereq,okayBtn:function(){e.setState({invalidPrereq:!1})}}),n.a.createElement(ae,{addSemester:this.addSemester.bind(this),exportPDF:this.exportPDF.bind(this)})))}}]),t}(r.Component);function he(e){var t=e.invalidPrereq,a=e.okayBtn;if(!t)return n.a.createElement(n.a.Fragment,null);var r=t.prereq.text,s=t.title;return n.a.createElement(Q.a,{isOpen:!!t},n.a.createElement($.a,null,"Prerequisite Error"),n.a.createElement(Z.a,null,"Just to let you know, according to Pitt's website, the prereqs for ",s," are ",r,"."),n.a.createElement(X.a,null,n.a.createElement(j.a,{color:"primary",onClick:a},"Okay!")))}var pe=D(de),fe=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement(pe,null)}}]),t}(r.Component),Ee=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={schedule:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=Object(g.a)(S.a.mark(function e(){var t=this;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!0}),this.props.firebase.user_ref().on("value",function(e){var a=e.val(),r=t.transformSemesterHashToList(a.semesters),n=r.semestersHash,s=r.semestersList;t.setState({loading:!1,userData:a,semestersHash:n,semestersList:s})});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.props.firebase.user_ref().off()}},{key:"transformSemesterHashToList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e).map(function(t){return e[t]}).sort(function(e){return e.id}).map(function(e){var t=Object.keys(e.courses||[]).map(function(t){return e.courses[t]}),a=Object(F.a)({},e);return a.courses=t||[],a.title=ne(e.id),a});return{semestersHash:e,semestersList:t}}},{key:"render",value:function(){return n.a.createElement("div",{draggable:"false"},n.a.createElement(V,{semesters:this.state.semestersList,viewMode:!0}))}}]),t}(r.Component),ve=(D(Ee),a(275)),be=a(291),Se=a(68),ge={email:"",password:"",error:null},Ce=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,r=t.email,n=t.password;e.preventDefault(),a.props.firebase.doSignInWithEmailAndPassword(r,n).then(function(){a.setState(Object(F.a)({},ge)),a.props.history.push(E)}).catch(function(e){a.setState({error:e})})},a.onChange=function(e){var t=e.target,r=t.name,n=t.value;a.setState(Object(Y.a)({},r,n))},a.state=Object(F.a)({},ge),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,r=e.error,s=""===a||""===t;return n.a.createElement(O.a,{sm:"12",md:{size:6,offset:3}},n.a.createElement("h2",null,"Sign in"),n.a.createElement("form",{onSubmit:this.onSubmit},n.a.createElement(k.a,null,n.a.createElement(N.a,{name:"email",value:t,onChange:this.onChange,type:"text",placeholder:"Email Address"})),n.a.createElement(k.a,null,n.a.createElement(N.a,{name:"password",value:a,onChange:this.onChange,type:"password",placeholder:"Password"})),n.a.createElement(C.a,null,n.a.createElement(O.a,{sm:"3"},n.a.createElement(j.a,{disabled:s,type:"submit"},"Sign In")),n.a.createElement(O.a,{sm:"9"},n.a.createElement("p",{className:"text-right"},"Don't have an account? Sign up"," ",n.a.createElement(ve.a,{to:"/signup"},"here.")))),r&&n.a.createElement("p",null,r.message)))}}]),t}(r.Component),Oe=Object(Se.a)(be.a,D)(Ce),je=function(){return n.a.createElement(k.a,null,n.a.createElement(Oe,null))},ye=a(276),ke=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleCourseStatus=function(e,t){var r=t.key,n=e.target.value,s=t.term,c=a.state.courses.slice();c.map(function(e){return e.key===r&&(e.status=n),e}),a.props.firebase.user_ref().child("semesters").child(s).child("courses").child(t.id).update({status:n}),a.setState({courses:c})},a.handleGradeSelect=function(e,t){var r=t.key,n=e.target.value,s=t.term;a.props.firebase.user_ref().child("semesters").child(s).child("courses").child(t.id).update({grade:n});var c=a.state.courses.slice();c.map(function(e){return e.key===r&&(e.grade=n),e}),a.calculateGPA(c),a.setState({courses:c})},a.state={GPA:"??"},a.points={"A+":4,A:4,"A-":3.75,"B+":3.25,B:3,"B-":2.75,"C+":2.25,C:2,"C-":1.75,"D+":1.25,D:1,"D-":.75,F:0,"?":-1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"calculateGPA",value:function(e){var t=this,a=0,r=0,n=0,s=0;e.forEach(function(e){-1!==t.points[e.grade]&&("COMPLETED"===e.status&&(a+=t.points[e.grade]*e.credits,r+=e.credits),n+=t.points[e.grade]*e.credits,s+=e.credits)});var c=a/r,i=n/s;this.setState({totalPoints:a,totalCredits:r,GPA:c,estimatedGPA:i})}},{key:"componentDidMount",value:function(){var e=Object(g.a)(S.a.mark(function e(){var t,a,r,n,s,c,i;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.firebase.user_ref().child("semesters").once("value");case 2:t=e.sent,a=t.val(),r=Object.keys(a).map(function(e){var t=a[e].courses||[];return Object.keys(t).map(function(a){return Object(F.a)({term:e},t[a])})}).filter(function(e){return e&&e.length>0}).sort(function(e,t){return e.termCode<t.termCode}),n=[].concat.apply([],r).map(function(e){return Object(F.a)({},e,{key:e.id+""+e.term})}),s=0;case 7:if(!(s<n.length)){e.next=17;break}return 0!==s&&n[s].term!==n[s-1].term&&(n[s].termDivider=!0),c=n[s].id,e.next=12,this.props.firebase.getCourseDescription(c);case 12:i=e.sent,n[s].credits=i.credits||3;case 14:s++,e.next=7;break;case 17:this.calculateGPA(n),this.setState({courses:n});case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.courses||[],a=t.map(function(t,a){var r="";return t.termDivider&&(r="term-divider"),n.a.createElement("tr",{key:t.key,className:r},n.a.createElement("td",null,ne(t.term)),n.a.createElement("td",null,t.id),n.a.createElement("td",null,t.credits),n.a.createElement("td",null,n.a.createElement(N.a,{type:"select",name:"status",value:t.status,onChange:function(a){e.handleCourseStatus(a,t)}},n.a.createElement("option",{value:"COMPLETED"},"Completed this class"),n.a.createElement("option",{value:"INPROG"},"In Progress"),n.a.createElement("option",{value:"FUTURE"},"Future"))),n.a.createElement("td",null,n.a.createElement(N.a,{type:"select",name:"select",value:t.grade,id:t.id,onChange:function(a){e.handleGradeSelect(a,t)}},Object.keys(e.points).map(function(e){return n.a.createElement("option",{key:e},e)}))))});0===t.length&&(a=n.a.createElement("tr",null,n.a.createElement("td",null,"..."),n.a.createElement("td",null," Loading "),n.a.createElement("td",null,"..."),n.a.createElement("td",null,"...")));var r=isNaN(this.state.GPA)?"??":this.state.GPA.toFixed(2),s=isNaN(this.state.estimatedGPA)?"??":this.state.estimatedGPA.toFixed(2);return n.a.createElement("div",{className:"gpa-calculator"},n.a.createElement("div",{className:"gpa-dsplay"},n.a.createElement("span",{className:"m-lg-2"},"GPA: ",r),n.a.createElement("span",null,"  "),n.a.createElement("span",null,"Estimated GPA: ",s)),n.a.createElement(ye.a,null,n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Term"),n.a.createElement("th",null,"Class"),n.a.createElement("th",null,"Credits"),n.a.createElement("th",null,"Status"),n.a.createElement("th",null,"Grade"))),n.a.createElement("tbody",null,a)))}}]),t}(r.Component),Pe=D(ke),Ne=a(277),Me=a(278),we=a(279),De=a(280),Ae=a(281),Ie=a(282),Te=a(292),_e=a(283),xe=a(284),Le=a(285),Ue=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).toggle=function(){a.setState(function(e,t){return{isOpen:!e.isOpen}})},a.closeCollapsed=function(){a.setState({isOpen:!1})},a.signOut=Object(g.a)(S.a.mark(function e(){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.firebase.signOut();case 2:a.props.history.push(E);case 3:case"end":return e.stop()}},e)})),a.state={isOpen:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.firebase.getUserId();return n.a.createElement(Ne.a,{color:"primary",dark:!0,expand:"md"},n.a.createElement(Me.a,{href:"https://github.com/varughese/major-master",target:"_other"},"Major Master"),n.a.createElement(we.a,{onClick:this.toggle}),n.a.createElement(De.a,{isOpen:this.state.isOpen,navbar:!0},n.a.createElement(Ae.a,{className:"ml-auto bg-primary",navbar:!0},null==e&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Ie.a,{onClick:this.closeCollapsed},n.a.createElement(ve.a,{className:"nav-link",to:"/signup"},"Sign Up")),n.a.createElement(Ie.a,{onClick:this.closeCollapsed},n.a.createElement(ve.a,{className:"nav-link",to:"/signin"},"Sign In"))),null!=e&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Ie.a,{onClick:this.closeCollapsed},n.a.createElement(ve.a,{className:"nav-link",to:"/edit-schedule"},"Edit Schedule")),n.a.createElement(Ie.a,{onClick:this.closeCollapsed},n.a.createElement(ve.a,{className:"nav-link",to:"/gpa-calculator"},"Calculate GPA"))),n.a.createElement(Te.a,{nav:!0,inNavbar:!0},n.a.createElement(_e.a,{nav:!0,caret:!0},"My Account"),n.a.createElement(xe.a,{right:!0},null!=e&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Le.a,{onClick:this.signOut},"Sign Out")))))))}}]),t}(r.Component),Re=Object(Se.a)(be.a,D)(Ue);function Be(e){var t=Number(e.substring(1,3)),a=Number(e[3]);return 10===(a+=3)&&(t+=1,a=1),"2"+t+a}function He(e){for(var t=[e],a=e;t.length<8;){var r=Be(a);a=r,7!==Number(a[3])&&t.push(r)}return t.reduce(function(e,t){return e[t]={id:t},e},{})}var Fe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleMajorSelect=function(e){a.setState({major:e.target.value})},a.handleChange=function(e){var t;a.setState((t={},Object(Y.a)(t,e.target.name,e.target.value),Object(Y.a)(t,"errorMessage",""),t))},a.getTermCode=a.getTermCode.bind(Object(G.a)(a)),a.state={email:"",password1:"",password:"",firstname:"",lastname:"",enrollterm:"",major:"",validation:{validEmail:""}},a.handleSubmit=a.handleSubmit.bind(Object(G.a)(a)),a.listOfMajors=["ADMJ","ADMPS","AFRCNA","AFROTC","ANTH","ARABIC","ARTSC","ASL","ASTRON","ATHLTR","BACC","BCHS","BECN","BFAE","BFIN","BHRM","BIND","BIOENG","BIOETH","BIOINF","BIOSC","BIOST","BMIS","BMKT","BOAH","BORG","BQOM","BSEO","BSPP","BUS","BUSACC","BUSADM","BUSBIS","BUSECN","BUSENV","BUSERV","BUSFIN","BUSHRM","BUSMKT","BUSORG","BUSQOM","BUSSCM","BUSSPP","CDACCT","CDENT","CEE","CGS","CHE","CHEM","CHIN","CLASS","CLRES","CMME","CMMUSIC","CMPBIO","CMPINF","COE","COEA","COMMRC","CS","CSD","DENHYG","DENT","DIASCI","DMED","DSANE","DUPOSC","EAS","ECE","ECON","EDUC","EM","ENDOD","ENGCMP","ENGFLM","ENGLIT","ENGR","ENGSCI","ENGWRT","ENRES","EOH","EPIDEM","FACDEV","FILMG","FILMST","FP","FR","FTADMA","FTDA","FTDB","FTDC","FTDJ","FTDR","GEOL","GER","GERON","GREEK","GREEKM","GSWS","HAA","HEBREW","HIM","HINDI","HIST","HONORS","HPA","HPM","HPS","HRS","HUGEN","IDM","IE","IL","IMB","INFSCI","INTBP","IRISH","ISB","ISSP","ITAL","JPNSE","JS","KOREAN","LATIN","LAW","LCTL","LDRSHP","LEGLST","LING","LIS","LSAP","MATH","ME","MED","MEDEDU","MEMS","MILS","MOLBPH","MSBMS","MSCBIO","MSCBMP","MSCMP","MSE","MSMBPH","MSMGDB","MSMI","MSMPHL","MSMVM","MSNBIO","MUSIC","NEURO","NPHS","NROSCI","NUR","NURCNS","NURNM","NURNP","NURSAN","NURSP","NUTR","ODO","ORBIOL","ORSUR","OT","PAS","PEDC","PEDENT","PEDS","PERIO","PERS","PETE","PHARM","PHIL","PHYS","PIA","POLISH","PORT","PROSTH","PS","PSY","PSYC","PSYED","PT","PUBHLT","PUBSRV","PWEA","QUECH","REHSCI","REL","RELGST","RESTD","RUSS","SA","SERCRO","SLAV","SLOVAK","SOC","SOCWRK","SPAN","STAT","SWAHIL","SWBEH","SWCED","SWCOSA","SWE","SWGEN","SWINT","SWRES","SWWEL","TELCOM","THEA","TURKSH","UKRAIN","URBNST","VIET"],a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleSubmit",value:function(){var e=Object(g.a)(S.a.mark(function e(t){var a,r,n;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==this.state.firstname){e.next=5;break}this.setState({errorMessage:"First name is not entered"}),e.next=32;break;case 5:if(""!==this.state.lastname){e.next=9;break}this.setState({errorMessage:"Last name is not entered"}),e.next=32;break;case 9:if(this.state.password===this.state.password1){e.next=13;break}this.setState({errorMessage:"Passwords do not match"}),e.next=32;break;case 13:if(""!==this.state.enrollterm&&4===this.state.enrollterm.length){e.next=17;break}this.setState({errorMessage:"Enrollment term is not entered"}),e.next=32;break;case 17:return e.prev=17,e.next=20,this.props.firebase.createUserWithEmailAndPassword(this.state.email,this.state.password);case 20:e.next=26;break;case 22:return e.prev=22,e.t0=e.catch(17),this.setState({errorMessage:e.t0.message}),e.abrupt("return");case 26:(a=this.props.firebase.getUser()).sendEmailVerification(),r=this.props.firebase.user_ref(),n=He(this.state.enrollterm),r.set({email:this.state.email,enrollment_term:this.state.enrollterm,first_name:this.state.firstname,last_name:this.state.lastname,id:a.uid,major:this.state.major,semesters:n}),window.location.assign(E);case 32:case"end":return e.stop()}},e,this,[[17,22]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getTermCode",value:function(e){this.setState({enrollterm:e})}},{key:"checkEmail",value:function(e){var t=this.state.validation;/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.target.value)?t.validEmail="success":t.validEmail="error",this.setState({validation:t})}},{key:"render",value:function(){var e=this,t=this.state.errorMessage;return n.a.createElement(O.a,{sm:"12",md:{size:6,offset:3}},n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement(k.a,null,n.a.createElement(P.a,{for:"inputFirstName"},"Name:"),n.a.createElement(N.a,{name:"firstname",id:"inputFirstName",placeholder:"First name",onChange:function(t){e.handleChange(t)}}),n.a.createElement(N.a,{name:"lastname",id:"inputLastName",placeholder:"Last name",onChange:function(t){e.handleChange(t)}})),n.a.createElement(k.a,null,n.a.createElement(P.a,{for:"inputEnrollTerm"},"Enrollment Term:"),n.a.createElement(te,{setTermCode:this.getTermCode})),n.a.createElement(k.a,null,n.a.createElement(P.a,{for:"inputEmail"},"Email address:"),n.a.createElement(N.a,{type:"email",name:"email",id:"inputEmail",placeholder:"e.g. johndoe123@email.com",onChange:function(t){e.checkEmail(t),e.handleChange(t)}})),n.a.createElement(k.a,null,n.a.createElement(P.a,{for:"inputPassword1"},"Create Password:"),n.a.createElement(N.a,{type:"password",name:"password1",id:"inputPassword1",placeholder:"No spaces or special characters such as '!@#$%'",onChange:function(t){e.handleChange(t)}})),n.a.createElement(k.a,null,n.a.createElement(P.a,{for:"inputPassword2"},"Confirm Password:"),n.a.createElement(N.a,{type:"password",name:"password",id:"inputPassword2",placeholder:"Confirm password",onChange:function(t){e.handleChange(t)}})),n.a.createElement(k.a,null,n.a.createElement(P.a,{for:"majorSelect"},"Select Major"),n.a.createElement(N.a,{type:"select",name:"select",id:"majorSelect",onChange:function(t){e.handleMajorSelect(t)}},this.listOfMajors.map(function(e){return n.a.createElement("option",{key:e},e)}))),n.a.createElement("p",null,t),n.a.createElement(j.a,{type:"submit"},"Create Account")))}}]),t}(n.a.Component),Ge=D(Fe),We=n.a.createContext(null),qe=function(e){var t=function(t){function a(e){var t;return Object(i.a)(this,a),(t=Object(l.a)(this,Object(u.a)(a).call(this,e))).state={authUser:null},t}return Object(m.a)(a,t),Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.auth.onAuthStateChanged(function(t){t?(localStorage.setItem("authUser",JSON.stringify(t)),e.setState({authUser:t})):(localStorage.removeItem("authUser"),e.setState({authUser:null}))})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return n.a.createElement(We.Provider,{value:this.state.authUser},n.a.createElement(e,this.props))}}]),a}(n.a.Component);return D(t)}(function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.firebase.getUserId();return n.a.createElement(d.a,{basename:"http://varughese.github.io/major-master"},n.a.createElement(n.a.Fragment,null,n.a.createElement(Re,null),n.a.createElement(v.a,{fluid:!0},n.a.createElement(h.a,null,n.a.createElement(p.a,{exact:!0,path:E},n.a.createElement(f.a,{from:"/",to:e?"/edit-schedule":"/signin"})),n.a.createElement(p.a,{path:"/signup",component:Ge}),n.a.createElement(p.a,{path:"/signin",component:je}),n.a.createElement(p.a,{path:"/edit-schedule",component:fe}),n.a.createElement(p.a,{path:"/gpa-calculator",component:Pe})))))}}]),t}(r.Component)),Je=a(131),ze=a.n(Je);c.a.render(n.a.createElement(A.Provider,{value:new x},n.a.createElement(W.DragDropContextProvider,{backend:ze.a},n.a.createElement(qe,null))),document.getElementById("root"))}},[[132,1,2]]]);
//# sourceMappingURL=main.1eb515c7.chunk.js.map